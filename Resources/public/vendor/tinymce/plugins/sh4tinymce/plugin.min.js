tinymce.PluginManager.requireLangPack("sh4tinymce"),tinymce.PluginManager.add("sh4tinymce",function(e,t){function a(){function t(e){for(var t=e.split(";"),a={},l=0;l<t.length;l++){var n=t[l].split(":");a[n[0].replace(/\-/g,"")]=n[1]}tinymce.each(a,function(e,t){"brush"==t?u.language!=e&&(u.language=e):(e="true"==e?!0:"false"==e?!1:e,"highlight"==t&&(e=e.replace(/\[/g,"").replace(/\]/g,"")),u[t]=e)})}function a(t){var a=t.data.code;a=a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");var l=t.data.language?t.data.language:r;n=e.dom.create("code",{"class":l},a),n=e.dom.create("pre",{},n),s?e.dom.replace(n,g):e.insertContent(e.dom.getOuterHTML(n)+"<br>")}var l,n,c,i,o=(e.dom,e.selection),u={},r="",s=!1,g=o.getNode();u.language="";var d=[{text:"Language",value:""},{text:"ActionScript3",value:"as3"},{text:"Apache",value:"apache"},{text:"Bash/shell",value:"bash"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"CSS",value:"css"},{text:"Delphi",value:"delphi"},{text:"Diff",value:"diff"},{text:"Erlang",value:"erl"},{text:"HTML",value:"html"},{text:"Java",value:"java"},{text:"JavaScript",value:"js"},{text:"Perl",value:"perl"},{text:"PHP",value:"php"},{text:"PowerShell",value:"ps"},{text:"Python",value:"py"},{text:"Ruby",value:"ruby"},{text:"Scala",value:"scala"},{text:"SQL",value:"sql"},{text:"Text",value:"nohighlight"},{text:"XML",value:"xml"},{text:"JSON",value:"json"}];"pre"==g.nodeName.toLowerCase()&&-1!=g.className.indexOf("brush:")?(s=!0,c=$(g).html(),c=c.replace(/\&lt\;/gi,"<").replace(/\&gt\;/gi,">"),i=g.className,i=i.replace(/ /g,""),t(i)):(c=o.getContent({format:"text"}),u.autolinks=!1,u.toolbar=!1);for(var v=0;v<d.length;v++)d[v].value==u.language&&(d[v].selected=!0);u.code=c,"&nbsp;"==u.code&&(u.code=""),l=e.windowManager.open({title:"SH4TinyMCE - Code Editor",data:u,minWidth:450,body:[{name:"language",type:"listbox",values:d},{name:"code",type:"textbox",minHeight:200,multiline:!0}],onsubmit:a})}tinymce.DOM.loadCSS(t+"/style/style.css"),e.addButton("sh4tinymce",{icon:"sh4tinymce",tooltip:"Insert/Edit Code",onclick:a}),e.addMenuItem("sh4tinymce",{text:"SH4TinyMCE",icon:"sh4tinymce",context:"insert",onclick:a})});